apiVersion: metallb.io/v1beta1
kind: L2Advertisement
metadata:
  name: openstack-external-advertisement
  namespace: metallb-system
spec:
  ipAddressPools:
  - openstack-external
  nodeSelectors:  # Optional block to limit nodes for a given advertisement
  {% for item in groups['kube_control_plane'] -%}
  - matchLabels:
      kubernetes.io/hostname: {{ item }}
  {% endfor -%}
  interfaces:  # Optional block to limit ifaces used to advertise VIPs
  - enp3s0
